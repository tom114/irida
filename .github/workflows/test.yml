name: Maven test

on:
  pull_request: null

jobs:
  build:

    runs-on: ubuntu-latest
    services:
      mariadb:
        image: mariadb:latest
        ports:
          - 3306
        env:
          MYSQL_USER: test
          MYSQL_PASSWORD: test
          MYSQL_DATABASE: irida_integration_test
          MYSQL_ROOT_PASSWORD: password

    steps:
    - uses: actions/checkout@v2
    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: Service build
      run: | 
        sudo apt-get install libgconf-2-4
        ./run-tests.sh service_testing

